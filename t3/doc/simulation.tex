\section{Simulation Analysis}
\label{sec:simulation}

The circuit under analysis was also simulated using Ngspice (revision 31) and maintaining the already mentioned node convention (figure REF-RC). The forward subsections establish a comparison between theoretical and simulation results.

\subsection{Envelope Detector}

Simulating the circuit led to the conclusion that the envelope detector reduced a lot the amplitude of the oscillations. However, it is impossible to dissociate its effect from the effect of the voltage regulator that is attached to it. Nonetheless as the theoretical analysis predicted and some experimentation confirmed it the envelope detector has a crucial role in this circuit. Without it the circuit only with the diods would incapable of oscillate around 12V since it would not be able to store energy in such a way to allow that. The following figures shows the envelope detector output measured in the simulation and compares it to the theoretical prediction, which anticipates a larger ripple since it does not take into account the non linear behavior of the diodes. 



\begin{figure}[h] \centering
  \begin{minipage}{.45\textwidth}
    \includegraphics[width=.8\textwidth]{t3env.eps}
    \caption{Envelope detector output - simulation analysis}
    \label{fig:simenv}
  \end{minipage}%
    \hspace{2 mm}
  \begin{minipage}{.45\textwidth}
  \centering
    \includegraphics[width=.9\textwidth]{envelope.eps}
    \caption{Envelope detector - theoretical analysis}
    \label{fig:compenv}
      \end{minipage}%
\end{figure}

\newpage
\subsection{Voltage Regulator}

The output of the circuit, which is the same as the output of the voltage regulator seems like the voltage regulator is to some extend dispensable. But that is not case, since the non linear behavior of diodes does a lot of work in reducing the ripple (as it was discovered by experimentation). The theoretical concept of incremental voltage divider was applied but it was a minor player but nonetheless a contributor. Like in the envelope detector, the theoretical analysis falls short in predictions because it didn't take into account the non linear behavior of diodes. Figures \ref{fig:simout} and \ref{fig:compout} show the final output of circuit as predicted by simulation and by theoretical analysis respectivelly. The oscillations around the desired DC output (12V) was also plotted and the comparision between simulation and therotical analysis is shown in figures \ref{fig:simdev}and  \ref{fig:simdev}.




\begin{figure}[h] \centering
  \begin{minipage}{.45\textwidth}
    \includegraphics[width=.8\textwidth]{t3out.eps}
    \caption{ACDC converter output - simulation analysis (which is also the voltage regulator output)}
    \label{fig:simout}
  \end{minipage}%
  \hspace{2 mm}
  \begin{minipage}{.45\textwidth}
  \centering
    \includegraphics[width=.9\textwidth]{final.eps}
    \caption{ACDC converter output - theoretical analysis (which is also the voltage regulator output)}
    \label{fig:compout}
      \end{minipage}%
\end{figure}

\begin{figure}[h] \centering
  \begin{minipage}{.45\textwidth}
    \includegraphics[width=.8\textwidth]{t3outcomp.eps}
    \caption{ACDC converter output oscillation - theoretical analysis}
    \label{fig:simdev}
  \end{minipage}%
    \hspace{2 mm}
  \begin{minipage}{.45\textwidth}
  \centering
    \includegraphics[width=.9\textwidth]{final.eps}
    \caption{ACDC converter output oscillation - theoretical analysis}
    \label{fig:compdev}
      \end{minipage}%
\end{figure}

\newpage
Finally, the quality of the implemented circuit was evaluated by it's average output (ideally 12V), it's ripple (ideally 0V) and it's relation between performance and cost (merit which is ideally infinite). The following tables show that results for the simulation and the theoretical. Ww will return to this matter right away in the conclusion.


\begin{table}[!htb]
  \begin{minipage}{.5\linewidth}
     \centering
  \begin{tabular}{|c|c|}
    \hline    
    {\bf Parameter} & {\bf Value} \\ \hline
    \input{../sim/sim_tab.tex}
 \end{tabular}
 \caption{Results of simulation analysis}
 \label{tab:sim}
  \end{minipage}%
    \hspace{2 mm}
    \begin{minipage}{.5\linewidth}
      \centering
        \begin{tabular}{|c|c|}
    \hline    
    {\bf Parameter} & {\bf Value} \\ \hline
    \input{../mat/tabela.tex}
 \end{tabular}
        \caption{Results of theoretical analysis}
        \label{comppar}
    \end{minipage} 
\end{table}



\newpage

